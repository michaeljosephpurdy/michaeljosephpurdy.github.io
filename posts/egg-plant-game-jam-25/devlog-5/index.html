<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Sundog - Devlog - 05 | mikepurdy.dev</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content="Animating the Character
I know I shouldn&rsquo;t be focusing on the art so early in this project, but I:

think it will help me feel good about the progress
want to

I usually use Aseprite or Procreate for art.
Not that I really know what I&rsquo;m doing.
I figured Aseprite would be the right tool for this job.
I searched &lsquo;run cycle&rsquo; on DuckDuckGo and clicked the first non-YouTube link:
The Key Poses of a Run Cycle.
That article had a nice image that looked like a good thing to model this run cycle off of."><meta name=author content="Mike Purdy"><meta name=generator content="Hugo 0.139.3"><link rel=alternate type=application/rss+xml href=/index.xml title="mikepurdy.dev Feed"><link rel="shortcut icon" type=image/vnd.microsoft.icon href=/favicon.7ca0fa9349e828522760d70ba0ddf68dae1236df023ae675b5794aaebe39aa80.ico integrity="sha256-fKD6k0noKFInYNcLoN32ja4SNt8COuZ1tXlKrr45qoA="><link rel=stylesheet href=/style.14c8ff19b50072be4166d83dec461766751e135f9561937968934a9c0c41c417.css integrity="sha256-FMj/GbUAcr5BZtg97EYXZnUeE1+VYZN5aJNKnAxBxBc=" crossorigin=anonymous><script defer src=/script.c515b297a254a81ade1515172752b9cd6e495af3db38009536fba14b53f6c7e9.js integrity="sha256-xRWyl6JUqBreFRUXJ1K5zW5JWvPbOACVNvuhS1P2x+k=" crossorigin=anonymous></script><link rel=stylesheet href=/custom.f2f17e03c55290fb815f9c4e7278360ef76f9d81e13f8601ac5638d5ef7d0e34.css integrity="sha256-8vF+A8VSkPuBX5xOcng2DvdvnYHhP4YBrFY41e99DjQ=" crossorigin=anonymous></head><body><div class=pure-g><div class="pure-u-1-24 pure-u-md-5-24"></div><div class="pure-u-22-24 pure-u-md-14-24"><div class=navigation><div class=navigation-header><div class="pure-menu pure-menu-horizontal"><a class="pure-menu-heading pure-menu-link" href=/>mikepurdy.dev</a></div></div><div class=navigation-content><div class="pure-menu pure-menu-horizontal"><ul class=pure-menu-list><li class=pure-menu-item title="all games"><a class=pure-menu-link href=/games/>games</a></li><li class="pure-menu-item pure-menu-selected" title=Blog><a class=pure-menu-link href=/posts/>blog</a></li><li class=pure-menu-item title="All tags"><a class=pure-menu-link href=/tags/>tags</a></li><li class=pure-menu-item title=Resume><a class=pure-menu-link href=https://mikepurdy.dev/resume.pdf target=_blank>resume</a></li></ul></div></div></div><div><div><h2 class=post-title>Sundog - Devlog - 05</h2><div class=post-meta><span>Date</span> [
<time datetime=2025-01-22T00:00:00Z>20250122
</time>]
<span>Tags</span> [
<a href=/tags/sundog>sundog</a>
<a href=/tags/game-jam>game-jam</a>
<a href=/tags/eggplant-25>eggplant-25</a>
]</div></div><div><h2 id=animating-the-character>Animating the Character</h2><p>I know I shouldn&rsquo;t be focusing on the art so early in this project, but I:</p><ul><li>think it will help me feel good about the progress</li><li>want to</li></ul><p>I usually use <a href=https://aseprite.org>Aseprite</a> or <a href=https://procreate.com>Procreate</a> for art.
Not that I <em>really</em> know what I&rsquo;m doing.
I figured Aseprite would be the right tool for this job.</p><p>I searched &lsquo;run cycle&rsquo; on DuckDuckGo and clicked the first non-YouTube link:
<a href=https://blog.animschool.edu/2024/04/10/the-key-poses-of-a-run-cycle/>The Key Poses of a Run Cycle</a>.
That article had a nice image that looked like a good thing to model this run cycle off of.</p><p><img src=run-cycle.png alt=runcycle></p><p>So, after a bit of work, I got this run cycle built.</p><p>I built the character with three layers, one for the back leg, one for the body, and one for the front leg.</p><p>Came away with this sick run cycle</p><p><img src=dog-running.gif alt=hotdog-run></p><p>It looks a bit rough, but I think it has some charm.</p><p>I went ahead and made some more for other player states</p><p><img src=aseprite.png alt=aseprite></p><h2 id=bringing-the-animations-into-the-game>Bringing the animations into the game</h2><p>I decided to use <a href=https://github.com/josh-perry/peachy>peachy</a> to take the exported spritesheets + <code>json</code> and animate them in the game.</p><p>This made implementing this stuff extremely straightforward.</p><h3 id=drawing>Drawing</h3><p>All drawing in the game so far is done in <code>SpriteDrawingSystem</code>, which filters entities if they have <code>drawable</code> and <code>position</code> components, and draws them.
The entities are sorted by <code>z_index or 0</code>, and the <code>drawable.sprite</code> is drawn where their <code>position</code> is (after applying an offset if specified).</p><p>I modified that to also look for <code>drawable.animation</code>, and if that is present, to draw that instead of the <code>drawable.sprite</code>.</p><h3 id=updating-animation>Updating animation</h3><p><code>peachy</code> is pretty sweet, and I created a small system that filters for <code>drawable</code> and <code>animation</code> components, updates the current animation each frame, and updates the <code>drawable.animation</code> to whatever the <code>animation.animation</code> object is pointing to.</p><div class=highlight><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#286983>local</span> <span style=color:#d7827e>SpriteAnimatingSystem</span> <span style=color:#797593>=</span> <span style=color:#d7827e>tiny.processingSystem</span><span style=color:#797593>()</span>
</span></span><span style=display:flex><span><span style=color:#d7827e>SpriteAnimatingSystem.filter</span> <span style=color:#797593>=</span> <span style=color:#d7827e>tiny.requireAll</span><span style=color:#797593>(</span><span style=color:#ea9d34>&#39;drawable&#39;</span><span style=color:#797593>,</span> <span style=color:#ea9d34>&#39;animation&#39;</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5>---@param e Animation | Drawable</span>
</span></span><span style=display:flex><span><span style=color:#286983>function</span> <span style=color:#56949f>SpriteAnimatingSystem</span><span style=color:#797593>:</span><span style=color:#d7827e>onAdd</span><span style=color:#797593>(</span><span style=color:#d7827e>e</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span> <span style=color:#797593>=</span> <span style=color:#d7827e>peachy.new</span><span style=color:#797593>(</span><span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>data</span><span style=color:#797593>,</span> <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>image</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.drawable</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span> <span style=color:#797593>=</span> <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span>
</span></span><span style=display:flex><span><span style=color:#286983>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#9893a5>---@param e Animation | Drawable</span>
</span></span><span style=display:flex><span><span style=color:#9893a5>---@param dt number</span>
</span></span><span style=display:flex><span><span style=color:#286983>function</span> <span style=color:#56949f>SpriteAnimatingSystem</span><span style=color:#797593>:</span><span style=color:#d7827e>process</span><span style=color:#797593>(</span><span style=color:#d7827e>e</span><span style=color:#797593>,</span> <span style=color:#d7827e>dt</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span><span style=color:#797593>:</span><span style=color:#d7827e>setTag</span><span style=color:#797593>(</span><span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span><span style=color:#797593>:</span><span style=color:#d7827e>play</span><span style=color:#797593>()</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>animation</span><span style=color:#797593>:</span><span style=color:#d7827e>update</span><span style=color:#797593>(</span><span style=color:#d7827e>dt</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span><span style=color:#286983>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#286983>return</span> <span style=color:#d7827e>SpriteAnimatingSystem</span>
</span></span></code></pre></div><h3 id=setting-each-animation>Setting each animation</h3><p>Animations, for the player at least, are determined in a new system called <code>PlayerAnimationSystem</code>.</p><p>All this does is set the <code>animation.current_tag</code> to whatever it should be for the given player state.</p><div class=highlight><pre tabindex=0 style=color:#575279;background-color:#faf4ed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#9893a5>---@param e Animation | Movable | Jumpable | Drawable | Velocity</span>
</span></span><span style=display:flex><span><span style=color:#286983>function</span> <span style=color:#56949f>PlayerAnimationSystem</span><span style=color:#797593>:</span><span style=color:#d7827e>process</span><span style=color:#797593>(</span><span style=color:#d7827e>e</span><span style=color:#797593>,</span> <span style=color:#d7827e>dt</span><span style=color:#797593>)</span>
</span></span><span style=display:flex><span>  <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;idle&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>if</span> <span style=color:#d7827e>e.movable</span><span style=color:#797593>.</span><span style=color:#d7827e>is_moving</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>    <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;run&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>end</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>if</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>state</span> <span style=color:#797593>==</span> <span style=color:#ea9d34>&#39;charging&#39;</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>if</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>charge_small_jump</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>      <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;small-charge&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>elseif</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>charge_large_jump</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>      <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;large-charge&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>end</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>elseif</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>state</span> <span style=color:#797593>==</span> <span style=color:#ea9d34>&#39;jumping&#39;</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>if</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>did_small_jump</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>      <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;small-jump&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>elseif</span> <span style=color:#d7827e>e.jumpable</span><span style=color:#797593>.</span><span style=color:#d7827e>did_large_jump</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>      <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;large-jump&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>end</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>if</span> <span style=color:#d7827e>e.velocity</span><span style=color:#797593>.</span><span style=color:#d7827e>y</span> <span style=color:#797593>&gt;</span> <span style=color:#ea9d34>0</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>      <span style=color:#9893a5>-- TODO fall animation?</span>
</span></span><span style=display:flex><span>      <span style=color:#d7827e>e.animation</span><span style=color:#797593>.</span><span style=color:#d7827e>current_tag</span> <span style=color:#797593>=</span> <span style=color:#ea9d34>&#39;run&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#286983>end</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>end</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>if</span> <span style=color:#d7827e>e.movable</span><span style=color:#797593>.</span><span style=color:#d7827e>last_direction</span> <span style=color:#797593>==</span> <span style=color:#ea9d34>&#39;forward&#39;</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>    <span style=color:#d7827e>e.drawable</span><span style=color:#797593>.</span><span style=color:#d7827e>flip</span> <span style=color:#797593>=</span> <span style=color:#286983>false</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>elseif</span> <span style=color:#d7827e>e.movable</span><span style=color:#797593>.</span><span style=color:#d7827e>last_direction</span> <span style=color:#797593>==</span> <span style=color:#ea9d34>&#39;backward&#39;</span> <span style=color:#286983>then</span>
</span></span><span style=display:flex><span>    <span style=color:#d7827e>e.drawable</span><span style=color:#797593>.</span><span style=color:#d7827e>flip</span> <span style=color:#797593>=</span> <span style=color:#286983>true</span>
</span></span><span style=display:flex><span>  <span style=color:#286983>end</span>
</span></span><span style=display:flex><span><span style=color:#286983>end</span>
</span></span></code></pre></div><h2 id=result>Result</h2><p><img src=animation-showcase.gif alt=animation-showcase></p><p>I&rsquo;ve still got some more stuff to do, the main things that come to mind are:</p><ul><li>better short jump animation</li><li>implement a fall animation</li><li>cleanup some of the sprite work</li></ul><p>That being said, I&rsquo;m really pleased with the result!
I&rsquo;m glad I took a break from &lsquo;core mechanics&rsquo; work and built this out and I think it is pretty fun and silly looking :)</p></div></div><div class=footer><div class=footer-content><div class="pure-menu pure-menu-horizontal"><ul class=pure-menu-list><li class=pure-menu-item title=repo><a class=pure-menu-link href=https://github.com/michaeljosephpurdy>github</a></li><li class=pure-menu-item title=itch.io><a class=pure-menu-link href=https://purdy.itch.io>itch.io</a></li><li class=pure-menu-item title="RSS Feed"><a href=/index.xml class=pure-menu-link>RSS</a></li><li class="pure-menu-item fix-cursor-pointer" title="Go to top"><a class=pure-menu-link id=btn-gototop><span class=fix-placement-up>&#8679;&#xfe0e;</span></a></li></ul></div></div><div class=footer-copyright><div class="pure-menu pure-menu-horizontal"><ul class=pure-menu-list><li class="pure-menu-item pure-menu-disabled">&copy; 2025 &mdash; Mike Purdy</li></ul></div></div></div></div><div class="pure-u-1-24 pure-u-md-5-24"></div></div></body></html>